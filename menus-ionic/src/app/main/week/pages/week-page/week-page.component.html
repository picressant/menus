<ion-header [translucent]="true">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Planning</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
    <div id="container">

        <div [hidden]="selectedTab !== footerDay.selectedTab">
            <h2 class="ion-margin lunch-margin">Midi</h2>
            <app-week-meal-card [meal]="meals[todayLunchIndex]" (click)="goToRecipe(todayLunchIndex)"
                                [showSides]="true"></app-week-meal-card>

            <h2 class="ion-margin dinner-margin">Soir</h2>
            <app-week-meal-card [meal]="meals[todayDinnerIndex]" (click)="goToRecipe(todayDinnerIndex)"
                                [showSides]="true"></app-week-meal-card>
        </div>

        <div [hidden]="selectedTab !== footerWeek.selectedTab">
            <ion-reorder-group (ionItemReorder)="doReorder($event)" disabled="false">
                <!-- Default reorder icon, end aligned items -->
                <ion-item *ngFor="let weekMeal of meals; let i = index"
                          [class.is-deleting]="isDeleting === i" class="week-meal-item">
                    <div class="meal-wrapper" (click)="gotToMeal(i)"
                         appLongPress delay="1000"
                         (longPressed)="pressEnded(i)"
                         (longPressStarted)="refreshWiggleEffect(i)"
                         (longPressCanceled)="refreshWiggleEffect(undefined)">
                        <div class="meal-day">{{getDay(i)}}</div>
                        <div class="meal-detail">
                            <div class="meal-recipe">
                                {{weekMeal?.recipe?.name}}
                            </div>
                            <span class="meal-side" *ngIf="weekMeal?.sideDishes.length > 0">
                            avec
                            <span *ngFor="let side of weekMeal?.sideDishes; let i = index">
                              {{ side.name }}<span *ngIf="i < weekMeal?.sideDishes.length-1">, </span>
                            </span>
                      </span>
                        </div>
                    </div>
                    <ion-reorder slot="end"></ion-reorder>
                </ion-item>
            </ion-reorder-group>
        </div>
        <div [hidden]="selectedTab !== footerGrocery.selectedTab">
            <app-week-grocery-list [meals]="meals"></app-week-grocery-list>
        </div>
    </div>
</ion-content>

<app-footer-tab
        selectedTab="{{selectedTab}}"
        (elementSelect)="selectedTab = $event"
        [footerElements]="[footerDay, footerWeek, footerGrocery]">
</app-footer-tab>
